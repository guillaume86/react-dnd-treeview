{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a338b57ab84c938c60f0","webpack:///./src/TreeView.tsx","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack:///./src/InsertTarget.tsx","webpack:///external \"react-dnd\"","webpack:///./src/DraggedNode.tsx","webpack:///./src/InsertTarget.styles.ts","webpack:///./src/Node.tsx","webpack:///external \"classnames\""],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;SChCM,Q,GAAA,Q;;;;;;AAHN;;AACA;;;;AAEM,mBAAmB,KAAnB,EAAuC;AAC3C,UACE;AAAA;AAAA,OAAK,WAAW,MAAM,UAAN,CAAiB,QAAjC;AACE,mCAAC,sBAAD,IACE,YAAY,IADd,EAEE,OAAO,MAAM,SAFf,EAGE,YAAY,MAAM,UAHpB,EAIE,YAAY,MAAM,UAJpB,EAKE,YAAY,MAAM,UALpB;AADF,IADF;AAWD,E;;;;;;AClBD,gD;;;;;;;;;;;;;;SCmDM,6B,GAAA,6B;;;;;;AAlDN;;AAGA;;AACA;;;;AAUA,KAAM,gBAAgB,SAAhB,aAAgB,CACpB,IADoB,EAEpB,QAFoB,EAGpB,KAHoB;AAAA,YAKpB,EACE,MAAM,UAAN,KAAqB,KAAK,UAA1B,KACC,MAAM,gBAAN,KAA2B,KAAK,gBAAhC,IACC,MAAM,gBAAN,KAA2B,KAAK,gBAAL,GAAwB,CAFrD,CADF,KAIK,CAAC,KAAK,YAAL,CAAkB,GAAlB,CAAsB,MAAM,UAAN,GAAmB,MAAM,UAAN,CAAiB,EAApC,GAAyC,IAA/D,CATc;AAAA,EAAtB;AAWA,KAAM,aAAa,SAAb,UAAa,CACjB,IADiB,EAEjB,QAFiB,EAGjB,KAHiB;AAAA,YAKjB,MAAM,UAAN,CAAiB;AACf,wBAAe,KAAK,UADL;AAEf,8BAAqB,KAAK,gBAFX;AAGf,2BAAkB,KAAK,aAHR;AAIf,eAAM,KAAK,IAJI;AAKf,wBAAe,MAAM,UALN;AAMf,8BAAqB,MAAM,gBANZ;AAOf,2BAAkB,MAAM;AAPT,MAAjB,GASA;AACE,qBAAY,MAAM,UADpB;AAEE,2BAAkB,MAAM;AAF1B,MAdiB;AAAA,EAAnB;AAoBA,KAAM,uBAAuB,SAAvB,oBAAuB,CAAC,OAAD;AAAA,YAAiC;AAC5D,kBAAS,QAAQ,OAAR,EADmD;AAE5D,qBAAY,QAAQ,MAAR,CAAe,EAAE,SAAS,IAAX,EAAf,KAAqC,QAAQ,OAAR;AAFW,MAAjC;AAAA,EAA7B;AAKM,wCACJ,KADI,EAC4B;AAAA,oBAEW,uBAAQ;AACjD,iBAAQ,iBADyC;AAEjD,kBAAS,oBAFwC;AAGjD,eAAM,cAAC,IAAD,EAAoB,OAApB;AAAA,oBACJ,QAAQ,OAAR,KACI,SADJ,CACc;AADd,eAEI,WAAW,IAAX,EAAwB,OAAxB,EAAiC,KAAjC,CAHA;AAAA,UAH2C;AAOjD,kBAAS,iBAAC,IAAD,EAAO,OAAP;AAAA,oBAAmB,cAAc,IAAd,EAAoB,OAApB,EAA6B,KAA7B,CAAnB;AAAA;AAPwC,MAAR,CAFX;AAAA;AAAA;AAAA,SAEvB,OAFuB,cAEvB,OAFuB;AAAA,SAEd,UAFc,cAEd,UAFc;AAAA,SAEA,OAFA;;AAYhC,YACE;AAAA;AAAA,WACE,KAAK,OADP,EAEE,OAAO,OAAO,MAAP,CACL,EADK,EAEL,MAAM,YAAN,GACI,qBAAO,kBADX,GAEI,qBAAO,iBAJN,EAKL,UAAU,qBAAO,mBAAjB,GAAuC,EALlC,EAML,aAAa,qBAAO,oBAApB,GAA2C,EANtC,CAFT;AAWE,gDAAK,OAAO,aAAa,qBAAO,0BAApB,GAAiD,EAA7D;AAXF,MADF;AAeD,E;;;;;;AC/ED,gD;;;;;;;;;;;ACEO,KAAM,sBAAO,UAAb,C;;;;;;;;;;;ACAP,KAAU,YAAV;AAAA,YAAU,YAAV,EAAsB;AACP,iCAAoC;AAC/C,oBAAW,YADoC;AAE/C,gBAAO,MAFwC;AAG/C,iBAAQ,KAHuC;AAI/C,mBAAU,UAJqC;AAK/C,iBAAQ,CALuC;AAM/C,kBAAS;AANsC,MAApC;AASA,uCAA0C;AACrD,cAAK;AADgD,MAA1C;AAIA,sCAAyC;AACpD,iBAAQ;AAD4C,MAAzC;AAIA,wCAA2C;AACtD,kBAAS;AAD6C,MAA3C;AAIA,yCAA4C,EAA5C;AAEA,+CAAkD;AAC7D,oBAAW,YADkD;AAE7D,gBAAO,MAFsD;AAG7D,iBAAQ,KAHqD;AAI7D,uBAAc,KAJ+C;AAK7D,qBAAY,qCALiD;AAM7D,oBAAW;AANkD,MAAlD;AAQd,EAhCD,EAAU,gCAAY,EAAZ,CAAV;AAkCA,KAAU,WAAV;AAAA,YAAU,WAAV,EAAqB;AACN,gCAAoC;AAC/C,kBAAS;AADsC,MAApC;AAIA,uCAA2C,EAA3C;AAEA,wCAA4C;AACvD,kBAAS;AAD8C,MAA5C;AAIA,sCAA0C;AACrD,0BAAiB;AADoC,MAA1C;AAIA,qCAAyC;AACpD,0BAAiB;AADmC,MAAzC;AAGd,EAlBD,EAAU,8BAAW,EAAX,CAAV;AAoBA,KAAM,UAAU,KAAhB;AAEM,KAAW,mCAAX;AAAN,YAAiB,MAAjB,EAAuB;AACR,iCAAqB,OAAO,MAAP,CAChC,EADgC,EAEhC,aAAa,YAFmB,EAGhC,aAAa,kBAHmB,EAIhC,UAAU,YAAY,YAAtB,GAAqC,EAJL,EAKhC,UAAU,YAAY,kBAAtB,GAA2C,EALX,CAArB;AAQA,gCAAoB,OAAO,MAAP,CAC/B,EAD+B,EAE/B,aAAa,YAFkB,EAG/B,aAAa,iBAHkB,EAI/B,UAAU,YAAY,YAAtB,GAAqC,EAJN,EAK/B,UAAU,YAAY,iBAAtB,GAA0C,EALX,CAApB;AAQA,kCAA2C,OAAO,MAAP,CACtD,EADsD,EAEtD,aAAa,mBAFyC,EAGtD,UAAU,YAAY,mBAAtB,GAA4C,EAHU,CAA3C;AAMA,mCAA4C,OAAO,MAAP,CACvD,EADuD,EAEvD,aAAa,oBAF0C,EAGvD,UAAU,YAAY,oBAAtB,GAA6C,EAHU,CAA5C;AAMA,yCACX,aAAa,0BADF;AAEd,EA/BD,EAAiB,qCAAM,EAAN,CAAjB,E;;;;;;;;;;;;;;SClBM,qB,GAAA,qB;SAkEA,gB,GAAA,gB;;;;;;AAzGN;;;;AACA;;AASA;;AACA;;;;;;AAEA,KAAM,iBAA6B,EAAnC;AAYA,KAAM,gBAAgB,SAAhB,aAAgB,CAAC,IAAD,EAAoC;AACxD,SAAM,UAAU,IAAI,GAAJ,CAAoB,CAAC,KAAK,EAAN,CAApB,CAAhB;AACA,SAAI,KAAK,QAAT,EAAmB;AACjB,cAAK,QAAL,CAAc,OAAd,CAAsB,UAAC,IAAD;AAAA,oBACpB,cAAc,IAAd,EAAoB,OAApB,CAA4B,UAAC,EAAD;AAAA,wBAAQ,QAAQ,GAAR,CAAY,EAAZ,CAAR;AAAA,cAA5B,CADoB;AAAA,UAAtB;AAGD;AACD,YAAO,OAAP;AACD,EARD;AAUA,KAAM,uBAAuB,SAAvB,oBAAuB,CAAC,OAAD;AAAA,YAAiC;AAC5D,qBAAY,QAAQ,UAAR;AADgD,MAAjC;AAAA,EAA7B;AAIM,gCAAgC,KAAhC,EAAwD;AAAA,oBAC1B,uBAAQ;AACxC,eAAM;AACJ,mBAAM,iBADF;AAEJ,mBAAM,MAAM,IAFR;AAGJ,2BAAc,cAAc,MAAM,IAApB,CAHV;AAIJ,yBAAY,MAAM,UAJd;AAKJ,+BAAkB,MAAM,gBALpB;AAMJ,4BAAe,MAAM;AANjB,UADkC;AASxC,kBAAS;AAT+B,MAAR,CAD0B;AAAA;AAAA,SACnD,UADmD,gBACnD,UADmD;AAAA,SACrC,OADqC;;AAa5D,YACE;AAAA;AAAA,WACE,KAAK,OADP,EAEE,WAAW,0BAAW,MAAM,UAAN,CAAiB,IAA5B,sBACR,MAAM,UAAN,CAAiB,YADT,EACwB,UADxB,EAFb,EAKE,KAAK,MAAM,IAAN,CAAW,EALlB;AAOE;AAAA;AAAA;AAAM,mBAAM,UAAN,CAAiB,MAAM,IAAvB;AAAN,UAPF;AAQG,eAAM,IAAN,CAAW,WAAX,GAAyB,IAAzB,GACC;AAAA;AAAA,eAAK,WAAW,MAAM,UAAN,CAAiB,YAAjC;AACG,mBAAM,IAAN,CAAW,QAAX,IAAuB,MAAM,IAAN,CAAW,QAAX,CAAoB,MAApB,GAA6B,CAApD,GACC,8BAAC,gBAAD,IACE,YAAY,MAAM,IADpB,EAEE,OAAO,MAAM,IAAN,CAAW,QAAX,GAAsB,MAAM,IAAN,CAAW,QAAjC,GAA4C,cAFrD,EAGE,YAAY,MAAM,UAHpB,EAIE,YAAY,MAAM,UAJpB,EAKE,YAAY,MAAM,UALpB,GADD,GASC,8BAAC,2CAAD,IACE,cAAc,KADhB,EAEE,YAAY,MAAM,IAFpB,EAGE,kBAAkB,CAHpB,EAIE,eAAe,IAJjB,EAKE,YAAY,MAAM,UALpB;AAVJ;AATJ,MADF;AAgCD;AAUD,KAAM,wBAAwB,SAAxB,qBAAwB,CAC5B,KAD4B;AAAA,YAG5B,MAAM,GAAN,CAAU,UAAC,IAAD,EAAO,KAAP;AAAA,gBAAkB,EAAE,UAAF,EAAQ,eAAe,MAAM,QAAQ,CAAd,CAAvB,EAAlB;AAAA,MAAV,CAH4B;AAAA,EAA9B;AAKA;AACA;AACA;AACA;AACA;AAEM,2BAA2B,KAA3B,EAAuD;AAC3D,YACE;AAAA;AAAA,WAAK,WAAW,MAAM,UAAN,CAAiB,QAAjC;AACG,+BAAsB,MAAM,KAA5B,EAAmC,GAAnC,CAAuC,UAAC,IAAD,EAAO,KAAP;AAAA,oBACtC;AAAA;AAAA,mBACE,KAAK,KAAK,IAAL,CAAU,EADjB,EAEE,OAAO,EAAE,UAAU,UAAZ,EAFT,EAGE,WAAW,MAAM,UAAN,CAAiB,sBAH9B;AAKG,2BAAU,CAAV,GACC,8BAAC,2CAAD,IACE,cAAc,IADhB,EAEE,YAAY,MAAM,UAFpB,EAGE,kBAAkB,KAHpB,EAIE,eAAe,IAJjB,EAKE,YAAY,MAAM,UALpB,GADD,GAQG,IAbN;AAcE,+CAAC,2CAAD,IACE,cAAc,KADhB,EAEE,YAAY,MAAM,UAFpB,EAGE,kBAAkB,QAAQ,CAH5B,EAIE,eAAe,KAAK,IAJtB,EAKE,YAAY,MAAM,UALpB,GAdF;AAqBE,+CAAC,qBAAD,IACE,YAAY,MAAM,UADpB,EAEE,kBAAkB,KAFpB,EAGE,eAAe,KAAK,aAHtB,EAIE,MAAM,KAAK,IAJb,EAKE,YAAY,MAAM,UALpB,EAME,YAAY,MAAM,UANpB,EAOE,YAAY,MAAM,UAPpB;AArBF,cADsC;AAAA,UAAvC;AADH,MADF;AAqCD,E;;;;;;AChJD,gD","file":"react-dnd-treeview.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dnd\"), require(\"classnames\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dnd\", \"classnames\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-dnd-treeview\"] = factory(require(\"react\"), require(\"react-dnd\"), require(\"classnames\"));\n\telse\n\t\troot[\"react-dnd-treeview\"] = factory(root[\"React\"], root[\"react-dnd\"], root[\"classnames\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a338b57ab84c938c60f0","import React from \"react\";\r\n\r\nimport { TreeViewProps } from \"./react-dnd-treeview\";\r\nimport \"./InsertTarget\";\r\nimport { TreeViewItemList } from \"./Node\";\r\n\r\nexport function TreeView(props: TreeViewProps) {\r\n  return (\r\n    <div className={props.classNames.treeView}>\r\n      <TreeViewItemList\r\n        parentNode={null}\r\n        nodes={props.rootNodes}\r\n        renderNode={props.renderNode}\r\n        classNames={props.classNames}\r\n        onMoveNode={props.onMoveNode}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/TreeView.tsx","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n// module id = 2\n// module chunks = 0","import React from \"react\";\r\nimport { DropTargetMonitor, useDrop } from \"react-dnd\";\r\n\r\nimport { TreeNode, MoveTreeNode } from \"./react-dnd-treeview\";\r\nimport { TYPE, DraggedNode } from \"./DraggedNode\";\r\nimport { Styles } from \"./InsertTarget.styles\";\r\n\r\nexport interface TreeViewInsertTargetProps {\r\n  readonly parentNode: TreeNode;\r\n  readonly parentChildIndex: number;\r\n  readonly precedingNode: TreeNode;\r\n  readonly insertBefore: boolean;\r\n  readonly onMoveNode: MoveTreeNode;\r\n}\r\n\r\nconst handleCanDrop = (\r\n  item: DraggedNode,\r\n  _monitor: DropTargetMonitor,\r\n  props: TreeViewInsertTargetProps\r\n) =>\r\n  !(\r\n    props.parentNode === item.parentNode &&\r\n    (props.parentChildIndex === item.parentChildIndex ||\r\n      props.parentChildIndex === item.parentChildIndex + 1)\r\n  ) && !item.allSourceIDs.has(props.parentNode ? props.parentNode.id : null);\r\n\r\nconst handleDrop = (\r\n  item: DraggedNode,\r\n  _monitor: DropTargetMonitor,\r\n  props: TreeViewInsertTargetProps\r\n) => (\r\n  props.onMoveNode({\r\n    oldParentNode: item.parentNode,\r\n    oldParentChildIndex: item.parentChildIndex,\r\n    oldPrecedingNode: item.precedingNode,\r\n    node: item.node,\r\n    newParentNode: props.parentNode,\r\n    newParentChildIndex: props.parentChildIndex,\r\n    newPrecedingNode: props.precedingNode,\r\n  }),\r\n  {\r\n    parentNode: props.parentNode,\r\n    parentChildIndex: props.parentChildIndex,\r\n  }\r\n);\r\n\r\nconst collectNodeDropProps = (monitor: DropTargetMonitor) => ({\r\n  canDrop: monitor.canDrop(),\r\n  isDropping: monitor.isOver({ shallow: true }) && monitor.canDrop(),\r\n});\r\n\r\nexport function DroppableTreeViewInsertTarget(\r\n  props: TreeViewInsertTargetProps\r\n) {\r\n  const [{ canDrop, isDropping }, dropRef] = useDrop({\r\n    accept: TYPE,\r\n    collect: collectNodeDropProps,\r\n    drop: (item: DraggedNode, monitor) =>\r\n      monitor.didDrop()\r\n        ? undefined // some child already handled drop\r\n        : handleDrop(item as any, monitor, props),\r\n    canDrop: (item, monitor) => handleCanDrop(item, monitor, props),\r\n  });\r\n\r\n  return (\r\n    <div\r\n      ref={dropRef}\r\n      style={Object.assign(\r\n        {},\r\n        props.insertBefore\r\n          ? Styles.insertBeforeTarget\r\n          : Styles.insertAfterTarget,\r\n        canDrop ? Styles.insertTargetCanDrop : {},\r\n        isDropping ? Styles.insertTargetDropping : {}\r\n      )}\r\n    >\r\n      <div style={isDropping ? Styles.insertTargetMarkerDropping : {}} />\r\n    </div>\r\n  );\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/InsertTarget.tsx","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dnd\"\n// module id = 4\n// module chunks = 0","import { TreeNode, TreeNodeID } from \"./react-dnd-treeview\";\r\n\r\nexport const TYPE = \"TreeNode\";\r\n\r\nexport interface DraggedNode {\r\n  type: string;\r\n  node: TreeNode;\r\n  allSourceIDs: Set<TreeNodeID>;\r\n  parentNode: TreeNode;\r\n  parentChildIndex: number;\r\n  precedingNode: TreeNode;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/DraggedNode.tsx","import React from \"react\";\r\n\r\nnamespace NormalStyles {\r\n  export const insertTarget: React.CSSProperties = {\r\n    boxSizing: \"border-box\",\r\n    width: \"100%\",\r\n    height: \"1em\",\r\n    position: \"absolute\",\r\n    zIndex: 1,\r\n    display: \"none\",\r\n  };\r\n\r\n  export const insertBeforeTarget: React.CSSProperties = {\r\n    top: \"-0.5em\",\r\n  };\r\n\r\n  export const insertAfterTarget: React.CSSProperties = {\r\n    bottom: \"-0.5em\",\r\n  };\r\n\r\n  export const insertTargetCanDrop: React.CSSProperties = {\r\n    display: \"flex\",\r\n  };\r\n\r\n  export const insertTargetDropping: React.CSSProperties = {};\r\n\r\n  export const insertTargetMarkerDropping: React.CSSProperties = {\r\n    boxSizing: \"border-box\",\r\n    width: \"100%\",\r\n    height: \"3px\",\r\n    borderRadius: \"2px\",\r\n    background: \"linear-gradient(90deg, gray, white)\",\r\n    alignSelf: \"center\",\r\n  };\r\n}\r\n\r\nnamespace DebugStyles {\r\n  export const insertTarget: React.CSSProperties = {\r\n    opacity: 0.5,\r\n  };\r\n\r\n  export const insertTargetCanDrop: React.CSSProperties = {};\r\n\r\n  export const insertTargetDropping: React.CSSProperties = {\r\n    opacity: 0.9,\r\n  };\r\n\r\n  export const insertBeforeTarget: React.CSSProperties = {\r\n    backgroundColor: \"#ffffdd\",\r\n  };\r\n\r\n  export const insertAfterTarget: React.CSSProperties = {\r\n    backgroundColor: \"#ffddff\",\r\n  };\r\n}\r\n\r\nconst isDebug = false;\r\n\r\nexport namespace Styles {\r\n  export const insertBeforeTarget = Object.assign(\r\n    {},\r\n    NormalStyles.insertTarget,\r\n    NormalStyles.insertBeforeTarget,\r\n    isDebug ? DebugStyles.insertTarget : {},\r\n    isDebug ? DebugStyles.insertBeforeTarget : {}\r\n  );\r\n\r\n  export const insertAfterTarget = Object.assign(\r\n    {},\r\n    NormalStyles.insertTarget,\r\n    NormalStyles.insertAfterTarget,\r\n    isDebug ? DebugStyles.insertTarget : {},\r\n    isDebug ? DebugStyles.insertAfterTarget : {}\r\n  );\r\n\r\n  export const insertTargetCanDrop: React.CSSProperties = Object.assign(\r\n    {},\r\n    NormalStyles.insertTargetCanDrop,\r\n    isDebug ? DebugStyles.insertTargetCanDrop : {}\r\n  );\r\n\r\n  export const insertTargetDropping: React.CSSProperties = Object.assign(\r\n    {},\r\n    NormalStyles.insertTargetDropping,\r\n    isDebug ? DebugStyles.insertTargetDropping : {}\r\n  );\r\n\r\n  export const insertTargetMarkerDropping: React.CSSProperties =\r\n    NormalStyles.insertTargetMarkerDropping;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/InsertTarget.styles.ts","import classnames from \"classnames\";\r\nimport React from \"react\";\r\nimport { DragSourceMonitor, useDrag } from \"react-dnd\";\r\n\r\nimport {\r\n  TreeNode,\r\n  TreeNodeID,\r\n  TreeNodeList,\r\n  MoveTreeNode,\r\n  TreeViewClassNames,\r\n} from \"./react-dnd-treeview\";\r\nimport { DraggedNode, TYPE } from \"./DraggedNode\";\r\nimport { DroppableTreeViewInsertTarget } from \"./InsertTarget\";\r\n\r\nconst EMPTY_NODELIST: TreeNode[] = [];\r\n\r\nexport interface TreeViewItemProps {\r\n  readonly parentNode: TreeNode;\r\n  readonly parentChildIndex: number;\r\n  readonly precedingNode: TreeNode;\r\n  readonly node: TreeNode;\r\n  readonly classNames: TreeViewClassNames;\r\n  readonly renderNode: (node: TreeNode) => JSX.Element;\r\n  readonly onMoveNode: MoveTreeNode;\r\n}\r\n\r\nconst gatherNodeIDs = (node: TreeNode): Set<TreeNodeID> => {\r\n  const nodeIDs = new Set<TreeNodeID>([node.id]);\r\n  if (node.children) {\r\n    node.children.forEach((node) =>\r\n      gatherNodeIDs(node).forEach((id) => nodeIDs.add(id))\r\n    );\r\n  }\r\n  return nodeIDs;\r\n};\r\n\r\nconst collectNodeDragProps = (monitor: DragSourceMonitor) => ({\r\n  isDragging: monitor.isDragging(),\r\n});\r\n\r\nexport function DraggableTreeViewItem(props: TreeViewItemProps) {\r\n  const [{ isDragging }, dragRef] = useDrag({\r\n    item: {\r\n      type: TYPE,\r\n      node: props.node,\r\n      allSourceIDs: gatherNodeIDs(props.node),\r\n      parentNode: props.parentNode,\r\n      parentChildIndex: props.parentChildIndex,\r\n      precedingNode: props.precedingNode,\r\n    } as DraggedNode,\r\n    collect: collectNodeDragProps,\r\n  });\r\n\r\n  return (\r\n    <div\r\n      ref={dragRef}\r\n      className={classnames(props.classNames.node, {\r\n        [props.classNames.nodeDragging]: isDragging,\r\n      })}\r\n      key={props.node.id}\r\n    >\r\n      <div>{props.renderNode(props.node)}</div>\r\n      {props.node.isCollapsed ? null : (\r\n        <div className={props.classNames.nodeChildren}>\r\n          {props.node.children && props.node.children.length > 0 ? (\r\n            <TreeViewItemList\r\n              parentNode={props.node}\r\n              nodes={props.node.children ? props.node.children : EMPTY_NODELIST}\r\n              classNames={props.classNames}\r\n              renderNode={props.renderNode}\r\n              onMoveNode={props.onMoveNode}\r\n            />\r\n          ) : (\r\n            <DroppableTreeViewInsertTarget\r\n              insertBefore={false}\r\n              parentNode={props.node}\r\n              parentChildIndex={0}\r\n              precedingNode={null}\r\n              onMoveNode={props.onMoveNode}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport interface TreeViewItemListProps {\r\n  readonly parentNode: TreeNode;\r\n  readonly nodes: TreeNodeList;\r\n  readonly renderNode: (node: TreeNode) => JSX.Element;\r\n  readonly classNames: TreeViewClassNames;\r\n  readonly onMoveNode: MoveTreeNode;\r\n}\r\n\r\nconst nodesWithPredecessors = (\r\n  nodes: TreeNode[]\r\n): { node: TreeNode; precedingNode: TreeNode }[] =>\r\n  nodes.map((node, index) => ({ node, precedingNode: nodes[index - 1] }));\r\n\r\n// TODO: add a mechanism to apply the CSS equivalent:\r\n// .nodePositioningWrapper:hover {\r\n//   /* otherwise drop targets interfere with drag start */\r\n//   z-index: 2;\r\n// }\r\n\r\nexport function TreeViewItemList(props: TreeViewItemListProps) {\r\n  return (\r\n    <div className={props.classNames.nodeList}>\r\n      {nodesWithPredecessors(props.nodes).map((node, index) => (\r\n        <div\r\n          key={node.node.id}\r\n          style={{ position: \"relative\" }}\r\n          className={props.classNames.nodePositioningWrapper}\r\n        >\r\n          {index === 0 ? (\r\n            <DroppableTreeViewInsertTarget\r\n              insertBefore={true}\r\n              parentNode={props.parentNode}\r\n              parentChildIndex={index}\r\n              precedingNode={null}\r\n              onMoveNode={props.onMoveNode}\r\n            />\r\n          ) : null}\r\n          <DroppableTreeViewInsertTarget\r\n            insertBefore={false}\r\n            parentNode={props.parentNode}\r\n            parentChildIndex={index + 1}\r\n            precedingNode={node.node}\r\n            onMoveNode={props.onMoveNode}\r\n          />\r\n          <DraggableTreeViewItem\r\n            parentNode={props.parentNode}\r\n            parentChildIndex={index}\r\n            precedingNode={node.precedingNode}\r\n            node={node.node}\r\n            classNames={props.classNames}\r\n            renderNode={props.renderNode}\r\n            onMoveNode={props.onMoveNode}\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Node.tsx","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"classnames\"\n// module id = 8\n// module chunks = 0"],"sourceRoot":""}